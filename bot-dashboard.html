<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Ù„ÙˆØ­Ø© ØªØ­ÙƒÙ… Ø§Ù„Ø¨ÙˆØª - Seleknyyy</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Cairo', sans-serif;
        }

        body {
            background: linear-gradient(135deg, #667eea20, #764ba220);
            padding: 30px;
        }

        .container {
            max-width: 1200px;
            margin: 0 auto;
        }

        h1 {
            color: #6c5ce7;
            margin-bottom: 30px;
            text-align: center;
        }

        .stats-grid {
            display: grid;
            grid-template-columns: repeat(4, 1fr);
            gap: 20px;
            margin-bottom: 30px;
        }

        .stat-card {
            background: white;
            border-radius: 15px;
            padding: 25px;
            box-shadow: 0 5px 15px rgba(0,0,0,0.05);
        }

        .stat-number {
            font-size: 2.5rem;
            font-weight: 700;
            color: #6c5ce7;
        }

        .stat-label {
            color: #a2a3b7;
            margin-top: 5px;
        }

        .section {
            background: white;
            border-radius: 15px;
            padding: 25px;
            margin-bottom: 30px;
            box-shadow: 0 5px 15px rgba(0,0,0,0.05);
        }

        .section-title {
            font-size: 1.3rem;
            margin-bottom: 20px;
            color: #1e1e2d;
        }

        .bot-logs {
            background: #1e1e2d;
            color: #fff;
            padding: 15px;
            border-radius: 10px;
            font-family: monospace;
            height: 400px;
            overflow-y: auto;
        }

        .log-entry {
            padding: 8px 0;
            border-bottom: 1px solid #334155;
        }

        .log-time {
            color: #6c5ce7;
            margin-left: 10px;
        }

        .log-bot {
            color: #25D366;
        }

        .log-success {
            color: #00d25b;
        }

        .refresh-btn {
            background: #6c5ce7;
            color: white;
            border: none;
            padding: 10px 25px;
            border-radius: 8px;
            cursor: pointer;
            margin-bottom: 20px;
        }

        table {
            width: 100%;
            border-collapse: collapse;
        }

        th {
            text-align: right;
            padding: 15px;
            background: #f8f9fa;
            color: #1e1e2d;
        }

        td {
            padding: 15px;
            border-bottom: 1px solid #eee;
        }

        .status {
            padding: 5px 12px;
            border-radius: 20px;
            font-size: 0.85rem;
        }

        .status-active {
            background: #d4edda;
            color: #155724;
        }

        .status-pending {
            background: #fff3cd;
            color: #856404;
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>ğŸ¤– Ù„ÙˆØ­Ø© ØªØ­ÙƒÙ… Ø¨ÙˆØª Seleknyyy</h1>

        <button class="refresh-btn" onclick="loadBotStats()">ğŸ”„ ØªØ­Ø¯ÙŠØ«</button>

        <!-- Ø¥Ø­ØµØ§Ø¦ÙŠØ§Øª Ø§Ù„Ø¨ÙˆØª -->
        <div class="stats-grid" id="botStats">
            <div class="stat-card">
                <div class="stat-number" id="totalOrders">0</div>
                <div class="stat-label">Ø¥Ø¬Ù…Ø§Ù„ÙŠ Ø§Ù„Ø·Ù„Ø¨Ø§Øª</div>
            </div>
            <div class="stat-card">
                <div class="stat-number" id="autoPosts">0</div>
                <div class="stat-label">Ù…Ù†Ø´ÙˆØ±Ø§Øª ØªÙ„Ù‚Ø§Ø¦ÙŠØ©</div>
            </div>
            <div class="stat-card">
                <div class="stat-number" id="whatsappMsgs">0</div>
                <div class="stat-label">Ø±Ø³Ø§Ø¦Ù„ ÙˆØ§ØªØ³Ø§Ø¨</div>
            </div>
            <div class="stat-card">
                <div class="stat-number" id="botStatus">âœ…</div>
                <div class="stat-label">Ø­Ø§Ù„Ø© Ø§Ù„Ø¨ÙˆØª</div>
            </div>
        </div>

        <!-- Ø³Ø¬Ù„ Ù†Ø´Ø§Ø· Ø§Ù„Ø¨ÙˆØª -->
        <div class="section">
            <h3 class="section-title">ğŸ“ Ø³Ø¬Ù„ Ù†Ø´Ø§Ø· Ø§Ù„Ø¨ÙˆØª</h3>
            <div class="bot-logs" id="botLogs"></div>
        </div>

        <!-- Ø¢Ø®Ø± Ø§Ù„Ø·Ù„Ø¨Ø§Øª -->
        <div class="section">
            <h3 class="section-title">ğŸ“‹ Ø¢Ø®Ø± Ø§Ù„Ø·Ù„Ø¨Ø§Øª</h3>
            <table>
                <thead>
                    <tr>
                        <th>Ø±Ù‚Ù… Ø§Ù„Ø·Ù„Ø¨</th>
                        <th>Ø§Ù„Ø¹Ù…ÙŠÙ„</th>
                        <th>Ø§Ù„Ù…Ù†ØªØ¬</th>
                        <th>Ø§Ù„Ø³Ø¹Ø±</th>
                        <th>Ø§Ù„ÙˆÙ‚Øª</th>
                        <th>Ø­Ø§Ù„Ø© Ø§Ù„Ø¨ÙˆØª</th>
                    </tr>
                </thead>
                <tbody id="ordersBody">
                    <tr><td colspan="6">Ù„Ø§ ØªÙˆØ¬Ø¯ Ø·Ù„Ø¨Ø§Øª</td></tr>
                </tbody>
            </table>
        </div>

        <!-- Ø§Ù„Ù…Ù†Ø´ÙˆØ±Ø§Øª Ø§Ù„Ù…Ø¬Ø¯ÙˆÙ„Ø© -->
        <div class="section">
            <h3 class="section-title">ğŸ“… Ø§Ù„Ù…Ù†Ø´ÙˆØ±Ø§Øª Ø§Ù„Ù…Ø¬Ø¯ÙˆÙ„Ø©</h3>
            <table>
                <thead>
                    <tr>
                        <th>Ø§Ù„Ù…Ù†Ø´ÙˆØ±</th>
                        <th>Ø§Ù„Ù…Ù†ØµØ©</th>
                        <th>Ù…ÙˆØ¹Ø¯ Ø§Ù„Ù†Ø´Ø±</th>
                        <th>Ø§Ù„Ø­Ø§Ù„Ø©</th>
                    </tr>
                </thead>
                <tbody id="postsBody">
                    <tr><td colspan="4">Ù„Ø§ ØªÙˆØ¬Ø¯ Ù…Ù†Ø´ÙˆØ±Ø§Øª</td></tr>
                </tbody>
            </table>
        </div>
    </div>

    <script>
        function loadBotStats() {
            // ØªØ­Ù…ÙŠÙ„ Ø§Ù„Ø·Ù„Ø¨Ø§Øª
            const orders = JSON.parse(localStorage.getItem('orders')) || [];
            const posts = JSON.parse(localStorage.getItem('mbot_posts')) || [];
            const logs = JSON.parse(localStorage.getItem('bot_logs')) || [];

            // ØªØ­Ø¯ÙŠØ« Ø§Ù„Ø¥Ø­ØµØ§Ø¦ÙŠØ§Øª
            document.getElementById('totalOrders').textContent = orders.length;
            document.getElementById('autoPosts').textContent = posts.length;
            
            // Ø¹Ø±Ø¶ Ø¢Ø®Ø± Ø§Ù„Ø·Ù„Ø¨Ø§Øª
            const ordersBody = document.getElementById('ordersBody');
            if (orders.length === 0) {
                ordersBody.innerHTML = '<tr><td colspan="6">Ù„Ø§ ØªÙˆØ¬Ø¯ Ø·Ù„Ø¨Ø§Øª</td></tr>';
            } else {
                ordersBody.innerHTML = orders.slice(-5).reverse().map(order => `
                    <tr>
                        <td>#${order.id}</td>
                        <td>${order.customerName}</td>
                        <td>${order.product?.name}</td>
                        <td>${order.product?.price.toLocaleString()} Ø¯.Ø¬</td>
                        <td>${order.time || ''}</td>
                        <td><span class="status status-active">âœ… ØªÙ… Ø§Ù„Ø¥Ø´Ø¹Ø§Ø±</span></td>
                    </tr>
                `).join('');
            }

            // Ø¹Ø±Ø¶ Ø§Ù„Ù…Ù†Ø´ÙˆØ±Ø§Øª Ø§Ù„Ù…Ø¬Ø¯ÙˆÙ„Ø©
            const postsBody = document.getElementById('postsBody');
            if (posts.length === 0) {
                postsBody.innerHTML = '<tr><td colspan="4">Ù„Ø§ ØªÙˆØ¬Ø¯ Ù…Ù†Ø´ÙˆØ±Ø§Øª</td></tr>';
            } else {
                postsBody.innerHTML = posts.map(post => `
                    <tr>
                        <td>${post.content.substring(0, 50)}...</td>
                        <td>${post.platform === 'all' ? 'ğŸŒ Ø§Ù„ÙƒÙ„' : post.platform}</td>
                        <td>${new Date(post.datetime).toLocaleString('ar-DZ')}</td>
                        <td><span class="status status-pending">â³ Ù…Ø¬Ø¯ÙˆÙ„</span></td>
                    </tr>
                `).join('');
            }

            // Ø¹Ø±Ø¶ Ø³Ø¬Ù„ Ø§Ù„Ø¨ÙˆØª
            const botLogs = document.getElementById('botLogs');
            if (logs.length === 0) {
                botLogs.innerHTML = '<div class="log-entry">Ù„Ø§ ØªÙˆØ¬Ø¯ Ø³Ø¬Ù„Ø§Øª</div>';
            } else {
                botLogs.innerHTML = logs.map(log => `
                    <div class="log-entry">
                        <span class="log-time">[${log.time}]</span>
                        <span class="${log.type === 'bot' ? 'log-bot' : log.type === 'success' ? 'log-success' : ''}">${log.icon}</span>
                        ${log.message}
                    </div>
                `).join('');
            }
        }

        // ØªØ­Ø¯ÙŠØ« ØªÙ„Ù‚Ø§Ø¦ÙŠ ÙƒÙ„ 10 Ø«ÙˆØ§Ù†ÙŠ
        setInterval(loadBotStats, 10000);
        loadBotStats();
    </script>
</body>
</html>